<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="../css/jsgrid.css" />
    <link rel="stylesheet" type="text/css" href="../css/theme.css" />
    <script src="../external/jquery/jquery-1.8.3.js"></script>
    <script src="../dist/jsgrid.js"></script>

    <style>
        * { 
            margin: 0;
            padding: 0;
        }

        html { 
            height: 100%;
        }

        body {
            font-family: Helvetica;
            font-size: 12px;
            height: 100%;
        }

        .grid-container { 
            position: relative;
            width: 100%;
            height: 70%;
        }
    </style>
</head>
<body>
    <div class="grid-container">
        <div id="jsGrid"></div>
    </div>

    <script>
        $(function() {
            var data = [];
            for(var i = 1; i <= 105; i++) {
                data.push({
                    Name: "Client" + i,
                    Age: 20 + i,
                    Address: "St. Moscow " + i,
                    Married: false,
                    Country: i % 3 + 1
                });
            }

            var gridController = {
                loadData: function(filter) {
                    var filteredData = $.grep(data, function(item) {
                        var found = true;
                        $.each(filter, function(key, value) {
                            if(value != "" && value != "0" && item.hasOwnProperty(key) && item[key] != value) {
                                found = false;
                                return false;
                            }
                        });
                        return found;
                    });

                    if(filter.pageIndex !== undefined) {
                        var startIndex = (filter.pageIndex - 1) * filter.pageSize;
                        result = {
                            data: filteredData.slice(startIndex, startIndex + filter.pageSize),
                            itemsCount: filteredData.length
                        };
                    }
                    else {
                        result = filteredData;
                    }

                    return result;
                },
                insertItem: function(insertingItem) {
                    data.push(insertingItem);
                    return insertingItem;
                },
                updateItem: function(updatingItem) {
                    updatingItem["Country"] = parseInt(updatingItem["Country"]);
                    return updatingItem;
                },
                deleteItem: function(deletingItem) {
                    data.splice($.inArray(deletingItem, data), 1);
                    return deletingItem;
                }
            };

            $("#jsGrid").jsGrid({
                height: "100%",
                width: "70%",
                filtering: true,
                editing: true,
                pageLoading: false,
                sorting: true,
                paging: true,
                autoload: true,
                pageSize: 10,
                pageButtonCount: 5,
                controller: gridController,
                fields: [
                    new jsGrid.TextField("Name", { title: "Name" }),
                    new jsGrid.TextField("Age", { title: "Age", sorter: "Number", align: "right" }),
                    new jsGrid.TextField("Address", { title: "Address" }),
                    new jsGrid.CheckboxField("Married", { title: "Married" }),
                    new jsGrid.SelectField("Country", {
                        title: "Country",
                        items: [
                            { text: "(Select)", value: 0 },
                            { text: "Russia", value: 1 },
                            { text: "USA", value: 2 },
                            { text: "England", value: 3 }
                        ],
                        textField: "text",
                        valueField: "value"
                    }),
                    new jsGrid.ControlField({
                        editButton: false
                    })
                ]
            });
        });
    </script>
</body>
</html>
